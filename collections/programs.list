<style>
	.custom-bg-region {background-repeat: no-repeat; background-position: center 50px; padding-top: 50px;}
</style>
<script>
	var events = [] 
	var exhibitionEvents = []
	var specialEvents = []
	function createEvent(eventTitle, eventStartMonth, eventStartDay, eventEndMonth, eventEndDay, fullUrl){
	  
	  var event = [eventTitle, eventStartMonth, eventStartDay, eventEndMonth, eventEndDay, fullUrl, "regular-event"]
	  events.push(event);
	
	}
	
	function createExhibitionEvent(eventTitle, eventStartMonth, eventStartDay, eventEndMonth, eventEndDay, fullUrl){
	  var exhibitionEvent = [eventTitle, eventStartMonth, eventStartDay, eventEndMonth, eventEndDay, fullUrl, "exhibition-event"]
	  
	  exhibitionEvents.push(exhibitionEvent)
	}
	
	function createSpecialEvent(eventTitle, eventStartMonth, eventStartDay, eventEndMonth, eventEndDay, fullUrl, excerpt){
	  var specialEvent = [eventTitle, eventStartMonth, eventStartDay, eventEndMonth, eventEndDay, fullUrl, "special-event", excerpt]
	  
	  specialEvents.push(specialEvent)
	}
	
</script>
<div id="calendarWrapper" class="textured-bg">
	<div class="flex-center-center flex-wrap" id="month-list"></div>
	<div id="calendar-container"></div>
</div>
<div class="inner-content-container flex-center-center flex-column">
	<i style="text-align: center;">Note that dates and info are subject to change. <br> Please check back and join our mailing list for upcoming event updates.  </i>
	<p><a>Salon 21</a> is currently available for buyouts to brands, designers, and press as a venue to host private dinners, cocktail events, trunk shows, editorial and content photoshoots, and more. Our team will work directly with you to create your perfect, customized event, with add-ons including florals, food and drink menus and tablescapes. Our space is located in a 1,600-sq foot loft in Manhattan's SoHo district. To learn more about our space, full event capabilities and availability, please contact <a href="mailto:alex@salontwenty-one.com">alex@salontwenty-one.com</a></p>
</div>
{.repeated section items}
  {.if starred}
    <script>createSpecialEvent("{title}", {structuredContent.startDate|date %m}, {structuredContent.startDate|date %e}, {structuredContent.endDate|date %m}, {structuredContent.endDate|date %e}, "{fullUrl}", '{excerpt}')</script>
  {.or}
    {.if categories}
      <script>createExhibitionEvent("{title}", {structuredContent.startDate|date %m}, {structuredContent.startDate|date %e}, {structuredContent.endDate|date %m}, {structuredContent.endDate|date %e}, "{fullUrl}")</script>
    {.or}
      <script>createEvent("{title}", {structuredContent.startDate|date %m}, {structuredContent.startDate|date %e}, {structuredContent.endDate|date %m}, {structuredContent.endDate|date %e}, "{fullUrl}")</script>
    {.end}
  {.end}
{.end}

<script>
	var monthListDiv = document.getElementById('month-list')
	const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
	const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
	function createCalendar(month, year) {
	 const firstDayOfMonth = new Date(year, month, 1);
	 const lastDayOfMonth = new Date(year, month + 1, 0);
	 const numDaysInMonth = lastDayOfMonth.getDate();
	 const startingDayOfWeek = firstDayOfMonth.getDay();
	 const table = document.createElement('table');
	 table.id = month + '-table'
	 
	
	 if (month === currentMonth){
	   table.classList.add('active-calendar-table')
	 } else {
	   table.classList.add('hidden-calendar-table')
	 }
	 
	 const headerRow = table.insertRow();
	 for (const dayOfWeek of daysOfWeek) {
	   const th = document.createElement('th');
	   th.innerText = dayOfWeek;
	   headerRow.appendChild(th);
	 }
	
	 let currentDate = 1;
	 for (let i = 0; i < 6; i++) {
	   const weekRow = table.insertRow();
	   for (let j = 0; j < 7; j++) {
	     const cell = weekRow.insertCell();
	     if (i === 0 && j < startingDayOfWeek) {
	       cell.innerHTML = '<div "class="date-cell dead-date"></div>';
	       
	     } else if (currentDate <= numDaysInMonth) {
	       var cellDate = []
	       cell.innerHTML = '<div class="date-cell live-date"  id="'+ month +'-'+ currentDate +'"><div class="date-cell-day"><div class="day-wrapper"><span class="day-of-week">'+ daysOfWeek[j] +'</span>'+ currentDate +'</div><div class="event-container"></div></div></div>';
	       currentDate++;
	     }
	   }
	 }
	 return table.outerHTML;
	}
	
{#  remove stuff from parenthesis when september passes  }
  var currentDate = new Date(2023, 8 );
  var currentMonth = currentDate.getMonth(); 
  var year = currentDate.getFullYear();

const calendar = createCalendar(currentMonth, year);
var calContainer = document.getElementById('calendar-container')

calContainer.innerHTML = calendar;
	
	function createNextFourCalendars(monthsList){
	 for (var i = 0; i <= monthsList.length - 1; i++){
	   var newCalendar = createCalendar(monthsList[i], year)
	   calContainer.innerHTML += newCalendar
	  }
	}
	
	
	function getNextFourMonths() {
	 var currentMonthLabel = '<h6 class="month-label active-month-label" id="'+ currentMonth + '-label" onclick="toggleMonths('+ currentMonth +')" >' + `${monthNames[currentMonth]}` + '</h6>'
	 monthListDiv.innerHTML += currentMonthLabel;
	 var monthsList = []; 
	 var monthsNumberList = []
	 
	 for (var i = 0; i < 4; i++) {
	     var nextMonth = (currentMonth + 1 + i) % 12; 
	     monthsNumberList.push(nextMonth)
	     var nextMonthName = new Date(0, nextMonth).toLocaleDateString('en-US', { month: 'long' }); 
	     monthsList.push(nextMonthName); 
	 }
	
	 for (var i = 0; i < monthsNumberList.length; i++){
	   var workingMonth = monthNames[monthsNumberList[i]]
	   var monthLabel = '<h6 class="month-label" onclick="toggleMonths('+ monthsNumberList[i] +')" id="'+ monthsNumberList[i] +'-label">' + monthsList[i] + '</h6>'
	   monthListDiv.innerHTML +=  monthLabel ;
	 }
	 createNextFourCalendars(monthsNumberList)
	 return monthsList
	
	}
	var nextFourMonths = getNextFourMonths();
	
	
	function addEvent(eventList){
	 for (var i = 0; i < eventList.length; i++){
	  var event = eventList[i];
	  var monthNum = event[1];
    var monthName =  (monthNum - 1) + '-table'
    if (event[6] === 'exhibition-event'){var eventTitle = "<div class='event-details "+ event[6]+"'><p>" + event[0] + "</p></div>"}
    else if(event[6] === 'special-event'){var eventTitle = "<div class='event-details "+ event[6]+"'><p>" + event[0] + "</p><span class='event-subtitle hover'>"+ event[7] + "</span></div>"}
    else {var eventTitle = "<div class='event-details "+ event[6]+"'><p>" + event[0] + "</p></div>"}
	     
    if ((event[4] - event[2]) === 0){
      var targetDiv = "#" + (event[1] - 1) + "-" + event[2];
      $("#" + monthName).find("#" + (event[1] - 1) + "-" + event[2] +" .event-container").append(eventTitle)
      $("#" + monthName).find("#" + (event[1] - 1) + "-" + event[2]).addClass('has-event')
	  } else {
      var eventRange = event[4] - event[2];
      for (i = 0; i < eventRange + 1; i++){
        var nextDay = event[2] + i
        $("#" + monthName).find("#" + (event[1] - 1) + "-" + nextDay +" .event-container").append(eventTitle)
        $("#" + monthName).find("#" + (event[1] - 1) + "-" + nextDay).addClass('has-event')
      }
    }
	 }
	 $(".date-cell").has(".special-event").css("border", "3px solid white");
	}
	
	addEvent(exhibitionEvents)
	addEvent(events)
	addEvent(specialEvents)
	
	
	function toggleMonths(monthName){
	 var id = monthName + '-table';
	 var labelId = monthName + '-label'
	 $('.active-calendar-table').addClass('hidden-calendar-table')
	 $('.active-calendar-table').removeClass('active-calendar-table')
	 $('#' + id).addClass('active-calendar-table')
	 $('.active-month-label').removeClass('active-month-label')
	 $('#' + labelId).addClass('active-month-label')
	}
	
	var clickableMonths = document.getElementsByClassName('month-label')
	
	function mobilizeCalendar(){
	 var windowWidth = $(window).width()
	 
	 if (windowWidth < 1000){
	   
	   $('tr').addClass('flex-start-start flex-column')
     $('.date-cell-day').addClass('flex-center-start')
    

	 } else {
	   
     $('tr').removeClass('flex-start-start flex-column')
     $('.date-cell-day').removeClass('flex-center-start')
      

     
	 }
	}
	$(document).ready(mobilizeCalendar)
	window.addEventListener('resize', mobilizeCalendar)
	
	
	
	function colorCalendar(){
	 var dateCells = document.getElementsByClassName('date-cell');
	 var counter = 1;
	 for (var i = 0; i < dateCells.length; i++){
	   counter++;
	   if (counter > 3){
	     counter = 1;
	   }
	   if (counter === 1){
	     dateCells[i].classList.add("cal-color-1")
	     
	   } else if (counter === 2) {
	     dateCells[i].classList.add("cal-color-2")
	     
	   } else if (counter === 3) {
	     
	     dateCells[i].classList.add('cal-color-3')
	   }
	 }
	 
	}
	colorCalendar();
</script>
